CREATE TABLE gestor
(
    cpf   VARCHAR(255) NOT NULL,
    nome  VARCHAR(255),
    email VARCHAR(255),
    CONSTRAINT pk_gestor PRIMARY KEY (cpf)
);

CREATE TABLE jogadores
(
    cpf     VARCHAR(255)     NOT NULL,
    nome    VARCHAR(255),
    email   VARCHAR(255),
    id_time BIGINT,
    idade   TIMESTAMP WITHOUT TIME ZONE,
    peso    DOUBLE PRECISION NOT NULL,
    altura  DOUBLE PRECISION NOT NULL,
    posicao VARCHAR(255),
    CONSTRAINT pk_jogadores PRIMARY KEY (cpf)
);

CREATE TABLE local
(
    nome        VARCHAR(255) NOT NULL,
    rua         VARCHAR(255),
    numero      VARCHAR(255),
    cep         VARCHAR(255),
    complemento VARCHAR(255),
    cidade      VARCHAR(255),
    estado      VARCHAR(255),
    CONSTRAINT pk_local PRIMARY KEY (nome)
);

CREATE TABLE times
(
    id        BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    nome      VARCHAR(255),
    id_gestor VARCHAR(255),
    corp      VARCHAR(255),
    cors      VARCHAR(255),
    escudo    VARCHAR(255),
    CONSTRAINT pk_times PRIMARY KEY (id)
);

CREATE TABLE treino
(
    id             BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    data_horario   TIMESTAMP WITHOUT TIME ZONE,
    local          VARCHAR(255),
    id_time        BIGINT,
    id_localizacao VARCHAR(255),
    CONSTRAINT pk_treino PRIMARY KEY (id)
);

ALTER TABLE times
    ADD CONSTRAINT uc_times_id_gestor UNIQUE (id_gestor);

ALTER TABLE jogadores
    ADD CONSTRAINT FK_JOGADORES_ON_ID_TIME FOREIGN KEY (id_time) REFERENCES times (id);

ALTER TABLE times
    ADD CONSTRAINT FK_TIMES_ON_ID_GESTOR FOREIGN KEY (id_gestor) REFERENCES gestor (cpf);

ALTER TABLE treino
    ADD CONSTRAINT FK_TREINO_ON_ID_LOCALIZACAO FOREIGN KEY (id_localizacao) REFERENCES local (nome);

ALTER TABLE treino
    ADD CONSTRAINT FK_TREINO_ON_ID_TIME FOREIGN KEY (id_time) REFERENCES times (id);